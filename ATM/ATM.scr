module ATM;

global protocol ATM(role Bank, role Client) {
	choice at Client {
		// The string contains the client ID
		WITHDRAW(string, number) from Client to Bank;
		choice at Svr {
			BALANCE(number) from Bank to Client;		
		} or {
			FAIL(string) from Bank to Client;		
		}
		do ATM(Bank, Client);
	} or {
		DEPOSIT(string, number) from Client to Bank;
		BALANCE(number) from Bank to Client;
		do ATM(Bank, Client);
	} or {
		BYE(string) from Client to Bank;
		BYE() from Bank to Client;	
	}
}